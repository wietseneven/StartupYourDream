var interact={user:{check:function(e,t){console.log(e),$.post("https://app.wathebikaande.eu/api/request.php",{type:"user",authCode:e},function(e,a){return t(),e})}}},keypad={el:{},keys:{key:"",typed:0},commingFrom:"",callback:"",setup:function(e,t){console.log("initiated keypad"),keypad.commingFrom=function(){"stage"+e.stage.setup()},keypad.callback=t,keypad.renderKeypad(e)},renderKeypad:function(e){app.getTemplate("keypad",function(t){console.log("rendering keypad template");var a={};if(e.fadeIn&&(a.hidden=!0),app.el.template.html(t(a)),keypad.assignSelectors(),keypad.watchKeys(),e.fadeIn){var n=0;keypad.el.keys.addClass("hidden"),keypad.el.keys.each(function(){var e=$(this);setTimeout(function(){e.removeClass("hidden")},10*n),n++}),keypad.el.keypad.fadeIn("fast")}})},assignSelectors:function(){keypad.el.keypad=$(".keypad"),keypad.el.keys=$(".keypad .key"),keypad.el.resultBox=$(".keypad .result")},watchKeys:function(){console.log("watching keypad keys"),keypad.el.keys.click(function(){var e=$(this),t=e.data("num");console.log("pressed key "+t),keypad.handleKeyPress(t),3===keypad.keys.typed&&(console.log("3 characters entered, check if user can continue"),keypad.handleSubmit())})},handleKeyPress:function(e){console.log("handling key "+e),keypad.ifUndo(e)?keypad.undoNumber():keypad.ifCancel(e)?keypad.el.keypad.fadeOut("fast",function(){keypad.commingFrom()}):keypad.newNumber(e)},ifUndo:function(e){return"undo"===e},ifCancel:function(e){return"cancel"===e},undoNumber:function(){console.log("Undoing last keypress"),keypad.keys.typed>0&&(keypad.keys.typed--,keypad.keys.key=keypad.keys.key.substring(0,keypad.keys.key.length-1),keypad.el.resultBox.children().last().remove())},newNumber:function(e){keypad.keys.typed<3&&(console.log("Adding new number"),keypad.el.resultBox.append("<span>"+e+"</span>"),keypad.keys.key+=e,keypad.keys.typed++)},hideKeys:function(){var e=0;keypad.el.keys.each(function(){var t=$(this);setTimeout(function(){t.addClass("hidden")},10*e),e++})},handleSubmit:function(){keypad.hideKeys(),keypad.el.resultBox.addClass("loading");var e=interact.user.check(keypad.keys.key,function(){keypad.callback&&keypad.callback(e)})},quit:function(){keypad.el.keypad.fadeOut("fast")}},video={el:{},setup:function(e){video.el.video=document.getElementById(e),video.click(),video.el.playBtn=$("#play"),video.el.pauseBtn=$("#pause"),video.el.replayBtn=$("#replay"),video.el.cta=$(".belowPopup")},click:function(){var e=null!==document.ontouchstart?"click":"touchstart",t=video.el.video;t.addEventListener(e,function(){video.el.replayBtn.fadeOut(),video.el.cta.fadeOut(),1==t.paused?(console.log("videoIsPaused"),video.el.pauseBtn.fadeOut(),video.el.playBtn.fadeIn().delay(300).fadeOut(),t.play()):(console.log("videoIsPlaying"),video.el.pauseBtn.fadeIn(),t.pause())}),t.addEventListener("ended",function(){video.el.replayBtn.fadeIn(),video.el.cta.fadeIn()},!1)}},map={el:{},setup:function(){map.createThree()},scene:new THREE.Scene,camera:new THREE.PerspectiveCamera(45,window.innerWidth/window.innerHeight,.01,1e3),createThree:function(){var e=new THREE.WebGLRenderer({alpha:!0});e.setSize(window.innerWidth,window.innerHeight),app.el.template.html(e.domElement);var t=new THREE.AmbientLight(16777215);map.scene.add(t);var a=new THREE.SphereGeometry(1,32,32),n=new THREE.MeshPhongMaterial;n.map=THREE.ImageUtils.loadTexture("assets/images/map/earthmap1k.jpg");var o=new THREE.Mesh(a,n);o.generateMipmaps=!1,map.scene.add(o),map.camera.position.z=1.5,o.rotation.y=4.5,o.rotation.x=.9;var s=function(){requestAnimationFrame(s),e.render(map.scene,map.camera)};s()}},stages={setup:function(){stages.selectStage()},selectStage:function(){var e=app.getParameters().stage;switch(e=Number(e)){case 1:console.log("It's in stage 1"),stage1.setup();break;case 2:console.log("It's in stage 2"),stage2.setup();break;case 3:console.log("It's in stage 3"),stage3.setup();break;case 4:console.log("It's in stage 4"),stage4.setup();break;case 5:console.log("It's in stage 5"),stage5.setup();break;default:console.log("This stage is not defined"),stages.listStages()}},listStages:function(){app.getTemplate("button",function(e){var t={title:"Kies je stage",body:"Bierrr",buttons:{1:{text:"Stage 1",action:"?stage=1"},2:{text:"Stage 2",action:"?stage=2"},3:{text:"Stage 3",action:"?stage=3"},4:{text:"Stage 4",action:"?stage=4"},5:{text:"Stage 5",action:"?stage=5"},6:{text:"Stage 6",action:"?stage=6"},7:{text:"Stage 7",action:"?stage=7"},8:{text:"Stage 8",action:"?stage=8"}}};app.el.template.html(e(t))})}},stage1={setup:function(){console.log("Setting up stage 1"),stage1.setWelcomeScreen()},setWelcomeScreen:function(){app.getTemplate("popup",function(e){console.log("rendering keypad template");var t={title:"Startup your dream",body:"Welkom bij The European Startup Factory!",button:{text:"START JE STARTUP",action:"stage1.setLogin()"},overlay:!1};app.el.template.html(e(t))})},setLogin:function(){app.login("stage1",function(){stage1.setIntroduction()})},setIntroduction:function(e){app.getTemplate("popup",function(e){var t={video:!0,id:"welcomeVideo",videoSrc:"stage1/rabit.mp4",button:{text:"Ga door naar de volgende koffer",action:"stages.listStages()"}};app.el.template.hide(),app.el.template.html(e(t)),app.el.template.fadeIn(),video.setup("welcomeVideo")})}},stage2={setup:function(){console.log("Setting up stage 1"),stage2.setLogin()},setLogin:function(){app.login("stage2",function(){stage2.setMap()})},setMap:function(){map.setup()}},stage3={setup:function(){console.log("Setting up stage 3"),stage3.setLogin()},setLogin:function(){app.login("stage3",function(){stage3.chooseBussinessCategory()})},chooseBussinessCategory:function(){app.getTemplate("button",function(e){var t={title:"Kies je bedrijfscategorie",buttons:{1:{text:"3d printing"},2:{text:"Muziek/streaming"},3:{text:"Sociale netwerken"},4:{text:"Domotica"},5:{text:"Eurovisie songfestival"}}};app.el.template.html(e(t))})}},stage4={setup:function(){console.log("Setting up stage 4"),stage4.setLogin()},setLogin:function(){app.login("stage4",function(){stage4.setWelcomeScreen()})},setWelcomeScreen:function(){app.getTemplate("popup",function(e){var t={video:!0,id:"welcomeVideo",videoSrc:"stage1/rabit.mp4",button:{text:"Wat nu? Ga door naar de volgende koffer",action:"stages.listStages()"}};app.el.template.html(e(t))})}},stage5={setup:function(){stage5.setLogin()},setLogin:function(){app.login("stage5",function(){})}},app={el:{template:$("#template")},templateRoot:"views/templates/",setup:function(){app.disableScroll(),app.enableFastClick(),stages.setup()},disableScroll:function(){document.ontouchmove=function(e){e.preventDefault()}},enableFastClick:function(){FastClick.attach(document.body)},getTemplate:function(e,t){var a,n;$.ajax({url:app.templateRoot+e+".html",success:function(e){a=e,n=Handlebars.compile(a),t&&t(n)},error:function(e){var t="Template kan niet geladen worden: ";t+=e.statusText,app.error(t)}})},error:function(e){app.getTemplate("popup",function(t){var a={title:"Er ging iets mis",body:e,button:{action:"window.location.reload()",text:"Probeer opnieuw"},overlay:!0};app.el.template.append(t(a))})},getParameters:function(){var e=window.location.search.substr(1);return null!=e&&""!=e?app.transformToAssocArray(e):{}},transformToAssocArray:function(e){for(var t={},a=e.split("&"),n=0;n<a.length;n++){var o=a[n].split("=");t[o[0]]=o[1]}return t},params:function(){return app.getParameters()},login:function(e,t){app.el.template.children().fadeOut("fast",function(){keypad.setup({fadeIn:!0,stage:e},function(){keypad.quit(),setTimeout(function(){app.el.template.hide(),t(),app.el.template.fadeIn()},500)})})}};app.setup();
//# sourceMappingURL=./app-min.js.map